<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
    <title>10秒ボタン</title>
</head>
<body>
    <main class="container" style="margin-top: 50px;">
        <section>
            <h1>10秒ボタン</h1>
            <p>
                「START」を押すと時間の表示が消えて10秒のカウントダウンが始まります。
                10秒だと思ったところで「STOP」を押してください。
            </p>
            <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            <div class="line-it-button" data-lang="ja" data-type="share-a" data-ver="3" data-url="https://social-plugins.line.me/ja/how_to_install#lineitbutton" data-color="default" data-size="large" data-count="true" style="display: none;"></div><script src="https://www.line-website.com/social-plugins/js/thirdparty/loader.min.js" async="async" defer="defer"></script>
        </section>
        <section style="margin: 100px;">
            <p id="sec" class="fs-1" style="color: #f75f5a; text-align: center;">0.0秒</p>
            <button type="button" class="btn btn-primary btn-lg" id="btn" style="width: 100%;">START</button>
            <div id="share" style="display: none; margin-top: 50px;">
                <p style="text-align: center;" class="fs-3">あなたの記録は<span id="share_time"></span></p>
                <a href="#" id="tweet_btn" class="btn btn-primary"><i class="bi bi-twitter"></i> Tweetする</a>
            </div>
        </section>
    </main>
    <script>
        const sec = document.getElementById("sec");
        const btn = document.getElementById("btn");
        const share = document.getElementById("share");
        const share_time = document.getElementById("share_time");
        const tweet_btn = document.getElementById("tweet_btn");

        let time = 0;
        let onclicked = false;
        let result = 0;
        
        btn.onclick = () =>{
            if(btn.innerText == "START"){
                btn.innerText = "STOP";
                onclicked = true;
            }else{
                btn.innerText = "START";
                sec.innerText = (time / 10).toFixed(1) + "秒";
                result = time;
                time = 0;
                onclicked = false;
                sec.style.opacity = "1";
                share.style.display = "";
                if(result === 100){
                    share_time.innerText = "10秒ジャスト!!";
                    tweet_btn.setAttribute("href", `https://twitter.com/intent/tweet?hashtags=10%E7%A7%92%E3%83%9C%E3%82%BF%E3%83%B3&original_referer=https%3A%2F%2Fpublish.twitter.com%2F&ref_src=twsrc%5Etfw&text=結果は10秒ジャスト!!でした。&tw_p=tweetbutton&url=https%3A%2F%2Fcode-raisan.github.io%2F10secButton%2F`);
                }else{
                    share_time.innerText = result / 10 + "秒";
                    tweet_btn.setAttribute("href", `https://twitter.com/intent/tweet?hashtags=10%E7%A7%92%E3%83%9C%E3%82%BF%E3%83%B3&original_referer=https%3A%2F%2Fpublish.twitter.com%2F&ref_src=twsrc%5Etfw&text=結果は${result / 10}秒でした。&tw_p=tweetbutton&url=https%3A%2F%2Fcode-raisan.github.io%2F10secButton%2F`);
                }
            }
            
        }

        setInterval(() => {
            if(onclicked){
                time++;
                console.log(time);
                share.style.display = "none";
                if(time < 20){
                    sec.innerText  = "10秒だと思うところでボタンを押せ！！";
                }
            }
        }, 100);
        </script>
</body>
</html>
